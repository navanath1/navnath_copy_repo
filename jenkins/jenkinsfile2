pipeline {
    agent any

    environment {
        BACKUP_DIR = '/jenkins_backup'
        JENKINS_HOME = '/var/lib/jenkins'
    }

    stages {
        stage('Backup') {
            steps {
                mkdir -p ${BACKUP_DIR}
                sh "tar -czf ${BACKUP_DIR}/jenkins_home_$(date +'%Y-%m-%d').tar.gz ${JENKINS_HOME}"
            }
        }
    }
}
